<!doctype html>
<html lang="ru">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="moroz69off">
  <meta name="Keywords" content="moroz69off">
  <meta name="Description" content="moroz69off">
  <title>Canvas04|moroz69off</title>
 </head>

 <body>
     <style type="text/css">
         body{margin:0;padding:0;width:100%;height:100%;}
     </style>
     <canvas id="m_canvas">|:)|</canvas>
     <script type="text/javascript">
         //=====================================================
         function clearParticles() {// Удаляем все частицы
             particles = [];
         }

         function getParent(el) {// Получаем родителя
             return el.parentElement || el.parentNode;
         }

         function getRandomInt(max, min) {// Возвратит псевдослучайное число из диапазона max — min
             var rnd = Math.floor(Math.random() * (max - min + 1)) + min;
             return rnd;
         }

         var position = {
             x: 0,
             y: 0
         };

         var w = window.innerWidth
             || document.documentElement.clientWidth
             || document.body.clientWidth;

         var h = window.innerHeight
             || document.documentElement.clientHeight
             || document.body.clientHeight;

         var canvas = document.getElementById("m_canvas");
         canvas.height = h;
         canvas.width = w;

         // набор частиц (сердечек)
         var particles = [];



         window.onload = function () {
             // Определение контекста рисования
             context = canvas.getContext("2d");
             // Отрисовка всего фрейма через 20 миллисекунд
             setTimeout("drawFrame()", 20);
         }

         // Данные, представляющие отдельную частицу
         function Particle() {
             this.strokeColor = "rgba(111, 111, 111, 222)";
             this.fillColor = "#ff99ff";
             this.pos_x = position.x;
             this.pos_y = position.y;
             this.lifeTime = 3333;
         }

         function drawHeart(particle) {


         }

         function addParticle() {
             position.x = getRandomInt(w, 0);
             position.y = getRandomInt(h, 0);
             var particle = new Particle();
             particles.push(particle);
         }

         function drawFrame() {
             context.fillStyle = "#E1E5EB";
             context.fillRect(0, 0, w, h);
             if (particles.length < 8) addParticle();
             for (i = 0; i < particles.length; i++) {
                 context.strokeStyle = particles[i].strokeColor;
                 context.fillStyle = particles[i].fillColor;
                 context.fillRect(particles[i].pos_x, particles[i].pos_y, 50, 50);
             }
             setTimeout("drawFrame()", 40);
         }

     </script>
 </body>
</html>
